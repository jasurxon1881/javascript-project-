{"ast":null,"code":"import _objectSpread from\"/Users/jasurkhonmisirov/Desktop/e-learning-master/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/jasurkhonmisirov/Desktop/e-learning-master/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/jasurkhonmisirov/Desktop/e-learning-master/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/jasurkhonmisirov/Desktop/e-learning-master/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Container}from\"../Register/style\";import{NavLink,useNavigate}from\"react-router-dom\";import{Formik,ErrorMessage}from\"formik\";import*as Yup from\"yup\";import{Button,Input,message}from\"antd\";import useRequest from\"../../hooks/useRequest\";import{useContext}from\"react\";import{AuthContext}from\"../../context/Auth\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(){var _useContext=useContext(AuthContext),_useContext2=_slicedToArray(_useContext,2),dispatch=_useContext2[1];var navigate=useNavigate();var _useRequest=useRequest(),request=_useRequest.request;var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(values){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:request({url:\"user/login\",method:\"post\",body:values,includeToken:false}).then(function(res){if(res!==null&&res!==void 0&&res.token){message.success(\"Successfully Login In!\");dispatch({type:\"register\",payload:res===null||res===void 0?void 0:res.token});navigate(\"/\");}else{message.error(res);}});case 1:case\"end\":return _context.stop();}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsx(Formik,{initialValues:{email:\"\",password:\"\"},validationSchema:Yup.object({password:Yup.string().min(3,\"Password should be of minimum 3 characters length\").required(\"Required\"),email:Yup.string().email(\"Enter a valid email\").required(\"Required\")}),onSubmit:handleSubmit,children:function children(formik){return/*#__PURE__*/_jsxs(Container.Form,{onSubmit:formik.handleSubmit,children:[/*#__PURE__*/_jsx(Container.Title,{children:\"Log In\"}),/*#__PURE__*/_jsx(Container.Text,{children:\"Welcome Back. Login to continue your learning.\"}),/*#__PURE__*/_jsx(Input,_objectSpread(_objectSpread({label:\"Email\",type:\"email\",autoComplete:\"current-email\"},formik.getFieldProps(\"email\")),{},{name:\"email\"})),/*#__PURE__*/_jsx(ErrorMessage,{name:\"email\",children:function children(msg){return/*#__PURE__*/_jsxs(\"div\",{style:{color:\"red\",fontSize:\"12px\"},children:[\"Email \",msg]});}}),/*#__PURE__*/_jsx(Input,_objectSpread(_objectSpread({label:\"Password\",type:\"password\",autoComplete:\"current-password\"},formik.getFieldProps(\"password\")),{},{name:\"password\"})),/*#__PURE__*/_jsx(ErrorMessage,{name:\"password\",children:function children(msg){return/*#__PURE__*/_jsxs(\"div\",{style:{color:\"red\",fontSize:\"12px\"},children:[\"Password \",msg]});}}),/*#__PURE__*/_jsx(\"div\",{className:\"nav-login\",children:/*#__PURE__*/_jsx(NavLink,{to:\"/register\",children:\"Register\"})}),/*#__PURE__*/_jsx(Button,{type:\"primary\",htmlType:\"submit\",children:\"Submit\"})]});}})});};export default Login;","map":{"version":3,"names":["Container","NavLink","useNavigate","Formik","ErrorMessage","Yup","Button","Input","message","useRequest","useContext","AuthContext","jsx","_jsx","jsxs","_jsxs","Login","_useContext","_useContext2","_slicedToArray","dispatch","navigate","_useRequest","request","handleSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","values","wrap","_callee$","_context","prev","next","url","method","body","includeToken","then","res","token","success","type","payload","error","stop","_x","apply","arguments","children","initialValues","email","password","validationSchema","object","string","min","required","onSubmit","formik","Form","Title","Text","_objectSpread","label","autoComplete","getFieldProps","name","msg","style","color","fontSize","className","to","htmlType"],"sources":["/Users/jasurkhonmisirov/Desktop/e-learning-master/src/components/Login/index.jsx"],"sourcesContent":["import { Container } from \"../Register/style\";\nimport { NavLink, useNavigate } from \"react-router-dom\";\nimport { Formik, ErrorMessage } from \"formik\";\nimport * as Yup from \"yup\";\nimport { Button, Input, message } from \"antd\";\nimport useRequest from \"../../hooks/useRequest\";\nimport { useContext } from \"react\";\nimport { AuthContext } from \"../../context/Auth\";\n\nconst Login = () => {\n  const [, dispatch] = useContext(AuthContext);\n\n  const navigate = useNavigate();\n  const { request } = useRequest();\n\n  const handleSubmit = async (values) => {\n    request({\n      url: \"user/login\",\n      method: \"post\",\n      body: values,\n      includeToken: false,\n    }).then((res) => {\n      if (res?.token) {\n        message.success(\"Successfully Login In!\");\n\n        dispatch({ type: \"register\", payload: res?.token });\n        navigate(\"/\");\n      } else {\n        message.error(res);\n      }\n    });\n  };\n  return (\n    <Container>\n      <Formik\n        initialValues={{\n          email: \"\",\n          password: \"\",\n        }}\n        validationSchema={Yup.object({\n          password: Yup.string()\n            .min(3, \"Password should be of minimum 3 characters length\")\n            .required(\"Required\"),\n          email: Yup.string().email(\"Enter a valid email\").required(\"Required\"),\n        })}\n        onSubmit={handleSubmit}\n      >\n        {(formik) => (\n          <Container.Form onSubmit={formik.handleSubmit}>\n            <Container.Title>Log In</Container.Title>\n            <Container.Text>\n              Welcome Back. Login to continue your learning.\n            </Container.Text>\n            <Input\n              label=\"Email\"\n              type=\"email\"\n              autoComplete=\"current-email\"\n              {...formik.getFieldProps(\"email\")}\n              name=\"email\"\n            />\n            <ErrorMessage name=\"email\">\n              {(msg) => (\n                <div style={{ color: \"red\", fontSize: \"12px\" }}>\n                  Email {msg}\n                </div>\n              )}\n            </ErrorMessage>\n\n            <Input\n              label=\"Password\"\n              type=\"password\"\n              autoComplete=\"current-password\"\n              {...formik.getFieldProps(\"password\")}\n              name=\"password\"\n            />\n            <ErrorMessage name=\"password\">\n              {(msg) => (\n                <div style={{ color: \"red\", fontSize: \"12px\" }}>\n                  Password {msg}\n                </div>\n              )}\n            </ErrorMessage>\n            <div className=\"nav-login\">\n              <NavLink to=\"/register\">Register</NavLink>\n            </div>\n            <Button type=\"primary\" htmlType=\"submit\">\n              Submit\n            </Button>\n          </Container.Form>\n        )}\n      </Formik>\n    </Container>\n  );\n};\n\nexport default Login;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}